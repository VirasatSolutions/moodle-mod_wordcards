{"version":3,"sources":["../src/dictation.js"],"names":["define","$","Ajax","log","a4e","keyboard","polly","templates","app","dryRun","audio","ttslanguage","init","props","theid","widgetid","nexturl","configcontrol","get","matchingdata","JSON","parse","value","remove","debug","token","region","owner","process","register_events","aplayer","on","next","total_time","calc_total_time","results","window","location","replace","click","attr","play","fetch_polly_url","tts","ttsvoice","onnewpollyurl","theurl","start","quit","json","terms","has_images","list_vocab","shuffle","pointer","hide","show","text","css","timer","interval","setInterval","update","count","pretty_print_secs","clear","clearInterval","end","tdata","length","calc_total_points","render","then","html","data","activity","console","removeClass","create","disable","check","progress","correct","filter","e","points","incorrect","trigger","selected","toLowerCase","trim","addClass","reportSuccess","reportFailure","result","question","time","push","setTimeout","term1id","term2id","call","methodname","args","termid"],"mappings":"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","sourcesContent":["/**\n * Matching module.\n *\n * @package mod_wordcards\n * @author  Justin Hunt - poodll.com\n * * (based on Paul Raine's APPs 4 EFL)\n */\n\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/log',\n    'mod_wordcards/a4e',\n    'mod_wordcards/keyboard',\n    'mod_wordcards/pollyhelper',\n    'core/templates'\n], function($, Ajax, log, a4e, keyboard, polly, templates) {\n\n    var app = {\n        dryRun: false,\n        audio: false,\n        ttslanguage: 'en-US',\n        init: function(props){\n\n            //pick up opts from html\n            var theid = '#' + props.widgetid;\n            this.dryRun=props.dryRun;\n            this.nexturl=props.nexturl;\n            var configcontrol = $(theid).get(0);\n            if(configcontrol){\n                var matchingdata = JSON.parse(configcontrol.value);\n                $(theid).remove();\n            }else{\n                //if there is no config we might as well give up\n                log.debug('No config found on page. Giving up.');\n                return;\n            }\n\n            polly.init(props.token,props.region,props.owner);\n            app.ttslanguage = props.ttslanguage;\n            app.process(matchingdata);\n            a4e.register_events();\n            this.register_events();\n        },\n\n        register_events: function(){\n\n            // Get the audio element\n            var aplayer = $(\"#dictation_player\");\n\n\n            $(\"#next-button\").on(\"click\",function(){\n                app.next();\n            });\n\n            $('body').on('click',\"#close-results\",function(){\n                //\"try again\" with this one\n                //$(\"#results\").hide();\n                //$(\"#start-button, #vocab-list\").show();\n\n                //\"finish\" with this one\n                var total_time=a4e.calc_total_time(app.results);\n                window.location.replace(app.nexturl.replace(/&amp;/g,'&') + \"&localscattertime=\" + total_time);\n            });\n\n            $(\"#listen-button\").click(function(){\n                if(app.audio){\n                    aplayer.attr('src',app.audio);\n                    aplayer[0].play();\n                }else{\n                    polly.fetch_polly_url(app.tts,'text', app.ttsvoice);\n                }\n\n            });\n\n            //play what was returned in polly.fetch_polly_url\n            polly.onnewpollyurl=function(theurl){\n                aplayer.attr('src',theurl);\n                aplayer[0].play();\n            };\n\n            $('body').on('click','#start-button',function(){\n                app.start();\n            });\n\n            $('body').on('click','#quit-button',function(){\n                app.quit();\n            });\n\n\n        },\n\n        process:function(json){\n\n            app.terms=json.terms;\n            app.has_images=json.has_images;\n            a4e.list_vocab(\"#vocab-list-inner\",app.terms);\n\n        },\n        start:function(){\n            app.results=[];\n            a4e.shuffle(app.terms);\n            app.pointer=0;\n            $(\"#vocab-list, #start-button\").hide();\n            $(\"#gameboard, #quit-button\").show();\n            $(\"#time-counter\").text(\"00:00\");\n            $(\"#progress-correct\").css('width','0%');\n            $(\"#progress-incorrect\").css('width','0%');\n            app.timer={\n                interval:setInterval(function(){app.timer.update();}, 1000),\n                count:0,\n                update:function(){\n                    app.timer.count++;\n                    $(\"#time-counter\").text(a4e.pretty_print_secs(app.timer.count));\n                }\n            };\n            app.next();\n        },\n        quit:function(){\n            keyboard.clear();\n            clearInterval(app.timer.interval);\n            $(\"#gameboard, #quit-button\").hide();\n            $(\"#vocab-list, #start-button\").show();\n        },\n\n        end:function(){\n            keyboard.clear();\n            clearInterval(app.timer.interval);\n            $(\"#gameboard, #quit-button, #start-button\").hide();\n            $(\"#results\").show();\n\n            //template data\n            var tdata=[];\n            tdata['results']=app.results;\n            tdata['total']=app.terms.length;\n            tdata['totalcorrect']=a4e.calc_total_points(app.results);\n            var total_time=a4e.calc_total_time(app.results);\n            if(total_time==0){\n                tdata['prettytime']='00:00';\n            }else{\n                tdata['prettytime']=a4e.pretty_print_secs(total_time);\n            }\n            templates.render('mod_wordcards/feedback',tdata).then(\n                function(html,js){\n                    $(\"#results-inner\").html(html);\n                }\n            );\n\n            var data={\n                results:app.results,\n                activity:\"dictation\"\n            };\n            console.log(data);\n\n        },\n\n\n        next:function(){\n\n            $(\"#next-button\").hide();\n            $(\"#submitted\").html(\"\").removeClass(\"a4e-correct a4e-incorrect\");\n\n            keyboard.create(\"input\",app.terms[app.pointer]['term'],app.pointer,true,function(value){\n                $(\"#submitted\").html(app.terms[app.pointer]['term']);\n                keyboard.disable();\n                app.check(value);\n            });\n\n            $(\"#question-counter\").text((app.pointer+1)+\"/\"+app.terms.length);\n\n            var progress={\n                correct:app.results.filter(function(e){return e.points>0}).length/app.terms.length*100,\n                incorrect:app.results.filter(function(e){return e.points==0}).length/app.terms.length*100\n            }\n\n            $(\"#progress-correct\").css('width',progress.correct+'%');\n            $(\"#progress-incorrect\").css('width',progress.incorrect+'%');\n\n            app.tts = app.terms[app.pointer]['term'];\n            if(app.terms[app.pointer]['ttsvoice']) {\n                app.ttsvoice = app.terms[app.pointer]['ttsvoice'];\n            }else{\n                app.ttsvoice = 'auto';\n            }\n            if(app.terms[app.pointer]['audio']){\n                app.audio = app.terms[app.pointer]['audio'];\n            }else{\n                app.audio=false;\n            }\n            $(\"#listen-button\").trigger(\"click\");\n\n        },\n\n        check:function(selected){\n            var correct=selected.toLowerCase().trim()==app.terms[app.pointer]['term'].toLowerCase().trim();\n            var points=0;\n            if(correct==true){\n                //createjs.Sound.play('correct');\n                $(\"#submitted\").addClass(\"a4e-correct\");\n                points=1;\n            }\n            else{\n                $(\"#submitted\").addClass(\"a4e-incorrect\");\n                //createjs.Sound.play('incorrect');\n            }\n\n            //post results to server\n            if(correct){\n                this.reportSuccess(app.terms[app.pointer]['id']);\n            }else{\n                this.reportFailure(app.terms[app.pointer]['id'],0);\n            }\n\n            var result={\n                question:app.terms[app.pointer]['definition'],\n                selected:selected,\n                correct:app.terms[app.pointer]['term'],\n                points: points,\n                time: app.timer.count\n            };\n            app.timer.count=0;\n            app.results.push(result);\n\n            if(app.pointer<app.terms.length-1){\n                app.pointer++;\n                if(!correct){\n                    $(\"#next-button\").show();\n                }\n                else{\n                    setTimeout(function(){\n                        $(\"#next-button\").trigger('click');\n                    },1000)\n                }\n            }\n\n            else{\n                app.end();\n            }\n\n\n\n        },\n\n        reportFailure: function(term1id, term2id) {\n            if (this.dryRun) {\n                return;\n            }\n\n            Ajax.call([{\n                methodname: 'mod_wordcards_report_failed_association',\n                args: {\n                    term1id: term1id,\n                    term2id: term2id\n                }\n            }]);\n        },\n\n        reportSuccess: function(termid) {\n            if (this.dryRun) {\n                return;\n            }\n\n            Ajax.call([{\n                methodname: 'mod_wordcards_report_successful_association',\n                args: {\n                    termid: termid\n                }\n            }]);\n        }\n    };\n\n    return app;\n\n});\n"],"file":"dictation.min.js"}