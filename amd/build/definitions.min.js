define ("mod_wordcards/definitions",["jquery","core/ajax","core/notification","mod_wordcards/a4e"],function(a,b,c,d){"use strict";return{init:function init(e){var g="#"+e.widgetid,h=a(g).get(0);if(h){var i=JSON.parse(h.value);this.props=i;a(g).remove()}else{log.debug("No config found on page. Giving up.");return}var j=a("#definitions-page-"+e.widgetid),k=i.modid,l=i.canmanage,m=j.find(".continue-button");d.register_events();d.init_audio(i.token,i.region,i.owner);function f(){return j.find(".term").length===j.find(".term.term-seen").length}j.on("click",".term-seen-action",function(d){d.preventDefault();var e=a(this).parents(".term").first(),g=e.data("termid");e.addClass("term-loading");b.call([{methodname:"mod_wordcards_mark_as_seen",args:{termid:g}}])[0].then(function(b){if(!b){return a.Deferred().reject()}e.addClass("term-seen")}).fail(c.exception).always(function(){e.removeClass("term-loading");if(f()){m.prop("disabled",!1)}})});if(!f()&&!l){m.prop("disabled",!0)}m.click(function(b){b.preventDefault();location.href=a(this).data("href")})}}});
//# sourceMappingURL=definitions.min.js.map
