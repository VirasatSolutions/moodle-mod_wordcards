{"version":3,"sources":["../src/matchtype.js"],"names":["define","$","Ajax","log","a4e","keyboard","templates","app","dryRun","init","props","theid","widgetid","nexturl","configcontrol","get","matchingdata","JSON","parse","value","remove","debug","process","register_events","on","next","total_time","calc_total_time","results","window","location","replace","start","quit","json","terms","has_images","list_vocab","shuffle","pointer","hide","show","text","css","timer","interval","setInterval","update","count","pretty_print_secs","clear","clearInterval","end","tdata","length","calc_total_points","render","then","html","data","activity","console","removeClass","create","disable","check","progress","correct","filter","e","points","incorrect","image","append","alert","selected","toLowerCase","trim","addClass","reportSuccess","reportFailure","result","question","time","push","setTimeout","trigger","term1id","term2id","call","methodname","args","termid"],"mappings":"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","sourcesContent":["/**\n * Matching module.\n *\n * @package mod_wordcards\n * @author  Justin Hunt - poodll.com\n * * (based on Paul Raine's APPs 4 EFL)\n */\n\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/log',\n    'mod_wordcards/a4e',\n    'mod_wordcards/keyboard',\n    'core/templates'\n], function($, Ajax, log, a4e, keyboard, templates) {\n\n    var app = {\n        dryRun: false,\n        init: function(props){\n\n            //pick up opts from html\n            var theid = '#' + props.widgetid;\n            this.dryRun=props.dryRun;\n            this.nexturl=props.nexturl;\n            var configcontrol = $(theid).get(0);\n            if(configcontrol){\n                var matchingdata = JSON.parse(configcontrol.value);\n                $(theid).remove();\n            }else{\n                //if there is no config we might as well give up\n                log.debug('No config found on page. Giving up.');\n                return;\n            }\n\n            app.process(matchingdata);\n\n            a4e.register_events();\n\n            this.register_events();\n        },\n\n        register_events: function(){\n\n\n            $(\"#next-button\").on(\"click\",function(){\n                app.next();\n            });\n\n            $('body').on('click',\"#close-results\",function(){\n\n                //\"try again\" with this one\n              //  $(\"#results\").hide();\n               // $(\"#start-button, #vocab-list\").show();\n\n                //\"finish\" with this one\n                var total_time=a4e.calc_total_time(app.results);\n                window.location.replace(app.nexturl.replace(/&amp;/g,'&') + \"&localscattertime=\" + total_time);\n            });\n\n            $('body').on('click','#start-button',function(){\n                app.start();\n            });\n\n            $('body').on('click','#quit-button',function(){\n                app.quit();\n            });\n        },\n\n        process:function(json){\n\n            app.terms=json.terms;\n            app.has_images=json.has_images;\n            a4e.list_vocab(\"#vocab-list-inner\",app.terms);\n\n        },\n        start:function(){\n            app.results=[];\n            a4e.shuffle(app.terms);\n            app.pointer=0;\n            $(\"#vocab-list, #start-button\").hide();\n            $(\"#gameboard, #quit-button\").show();\n            $(\"#time-counter\").text(\"00:00\");\n            $(\"#progress-correct\").css('width','0%');\n            $(\"#progress-incorrect\").css('width','0%');\n            app.timer={\n                interval:setInterval(function(){app.timer.update();}, 1000),\n                count:0,\n                update:function(){\n                    app.timer.count++;\n                    $(\"#time-counter\").text(a4e.pretty_print_secs(app.timer.count));\n                }\n            };\n            app.next();\n        },\n        quit:function(){\n            keyboard.clear();\n            clearInterval(app.timer.interval);\n            $(\"#gameboard, #quit-button\").hide();\n            $(\"#vocab-list, #start-button\").show();\n        },\n\n        end:function(){\n            keyboard.clear();\n            clearInterval(app.timer.interval);\n            $(\"#gameboard, #quit-button, #start-button\").hide();\n            $(\"#results\").show();\n\n            //template data\n            var tdata=[];\n            tdata['results']=app.results;\n            tdata['total']=app.terms.length;\n            tdata['totalcorrect']=a4e.calc_total_points(app.results);\n            var total_time=a4e.calc_total_time(app.results);\n            if(total_time==0){\n                tdata['prettytime']='00:00';\n            }else{\n                tdata['prettytime']=a4e.pretty_print_secs(total_time);\n            }\n            templates.render('mod_wordcards/feedback',tdata).then(\n                function(html,js){\n                    $(\"#results-inner\").html(html);\n                }\n            );\n\n            var data={\n                results:app.results,\n                activity:\"match_type\"\n            };\n            console.log(data);\n\n        },\n\n        next:function(){\n\n            $(\"#next-button\").hide();\n            $(\"#submitted\").html(\"\").removeClass(\"a4e-correct a4e-incorrect\");\n\n            keyboard.create(\"input\",app.terms[app.pointer]['term'],app.pointer,true,function(value){\n                $(\"#submitted\").html(app.terms[app.pointer]['term']);\n                keyboard.disable();\n                app.check(value);\n            });\n\n            $(\"#question-counter\").text((app.pointer+1)+\"/\"+app.terms.length);\n\n            var progress={\n                correct:app.results.filter(function(e){return e.points>0}).length/app.terms.length*100,\n                incorrect:app.results.filter(function(e){return e.points==0}).length/app.terms.length*100\n            }\n\n            $(\"#progress-correct\").css('width',progress.correct+'%');\n            $(\"#progress-incorrect\").css('width',progress.incorrect+'%');\n            $(\"#question\").html(\"\");\n\n            if(app.terms[app.pointer]['definition']!==\"\" && app.terms[app.pointer]['term']!==\"\"){\n                if(app.terms[app.pointer].image!==null && app.terms[app.pointer]['image']!=\"\"){\n                    $(\"#question\").html(\"<img style='height:200px;width:auto;' class='center-block img-responsive img-thumbnail' src='\"+app.terms[app.pointer].image+\"'><br/>\");\n                }\n                else if(app.has_images && (app.terms[app.pointer].image==null || app.terms[app.pointer]['term']==\"\")){\n                    $(\"#question\").html(\"<img style='height:200px;width:auto;' class='center-block img-responsive img-thumbnail' src='/images/no-image.png'><br/>\");\n                }\n                $(\"#question\").append(\"<strong>\"+app.terms[app.pointer]['definition']+\"</strong>\");\n            }\n\n            else if(app.terms[app.pointer].image!==null && app.terms[app.pointer].image!=\"\"){\n                $(\"#question\").html(\"<img class='center-block img-responsive img-thumbnail' src='\"+app.terms[app.pointer].image+\"'>\");\n            }\n\n            else{\n                a4e.alert(\"Could not generate a test with these settings!\",\"error\");\n                app.end();\n            }\n\n        },\n\n        check:function(selected){\n            var correct=selected.toLowerCase().trim()==app.terms[app.pointer]['term'].toLowerCase().trim();\n            var points=0;\n            if(correct==true){\n                //createjs.Sound.play('correct');\n                $(\"#submitted\").addClass(\"a4e-correct\");\n                points=1;\n            }\n            else{\n                $(\"#submitted\").addClass(\"a4e-incorrect\");\n                //createjs.Sound.play('incorrect');\n            }\n\n            //post results to server\n            if(correct){\n                this.reportSuccess(app.terms[app.pointer]['id']);\n            }else{\n                this.reportFailure(app.terms[app.pointer]['id'],0);\n            }\n\n            var result={\n                question:app.terms[app.pointer]['definition'],\n                selected:selected,\n                correct:app.terms[app.pointer]['term'],\n                points: points,\n                time: app.timer.count\n            };\n            app.timer.count=0;\n            app.results.push(result);\n\n            if(app.pointer<app.terms.length-1){\n                app.pointer++;\n                if(!correct){\n                    $(\"#next-button\").show();\n                }\n                else{\n                    setTimeout(function(){\n                        $(\"#next-button\").trigger('click');\n                    },1000)\n                }\n            }\n\n            else{\n                app.end();\n            }\n\n\n\n        },\n\n        reportFailure: function(term1id, term2id) {\n            if (this.dryRun) {\n                return;\n            }\n\n            Ajax.call([{\n                methodname: 'mod_wordcards_report_failed_association',\n                args: {\n                    term1id: term1id,\n                    term2id: term2id\n                }\n            }]);\n        },\n\n        reportSuccess: function(termid) {\n            if (this.dryRun) {\n                return;\n            }\n\n            Ajax.call([{\n                methodname: 'mod_wordcards_report_successful_association',\n                args: {\n                    termid: termid\n                }\n            }]);\n        }\n    };\n\n    return app;\n\n});\n"],"file":"matchtype.min.js"}