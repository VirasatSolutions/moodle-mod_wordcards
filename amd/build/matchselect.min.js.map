{"version":3,"sources":["../src/matchselect.js"],"names":["define","$","Ajax","log","a4e","templates","app","dryRun","init","props","theid","widgetid","nexturl","configcontrol","get","matchingdata","JSON","parse","value","remove","debug","process","register_events","on","next","total_time","calc_total_time","results","window","location","replace","check","data","start","quit","json","terms","has_images","list_vocab","shuffle","pointer","hide","show","text","css","timer","interval","setInterval","update","count","pretty_print_secs","clearInterval","end","tdata","length","calc_total_points","render","then","html","activity","console","progress","correct","filter","e","points","incorrect","image","append","alert","get_distractors","clicked","result","question","selected","time","push","background","addClass","parent","reportSuccess","reportFailure","setTimeout","trigger","distractors","slice","answer","splice","options","each","i","o","is_correct","term_id","toString","code","join","term1id","term2id","call","methodname","args","termid"],"mappings":"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","sourcesContent":["/**\n * Matching module.\n *\n * @package mod_wordcards\n * @author  Justin Hunt - poodll.com\n * * (based on Paul Raine's APPs 4 EFL)\n */\n\ndefine([\n    'jquery',\n    'core/ajax',\n    'core/log',\n    'mod_wordcards/a4e',\n    'core/templates'\n], function($, Ajax, log, a4e, templates) {\n\n    var app = {\n        dryRun: false,\n        init: function(props){\n\n            //pick up opts from html\n            var theid = '#' + props.widgetid;\n            this.dryRun=props.dryRun;\n            this.nexturl=props.nexturl;\n            var configcontrol = $(theid).get(0);\n            if(configcontrol){\n                var matchingdata = JSON.parse(configcontrol.value);\n                $(theid).remove();\n            }else{\n                //if there is no config we might as well give up\n                log.debug('No config found on page. Giving up.');\n                return;\n            }\n\n            app.process(matchingdata);\n\n            a4e.register_events();\n\n            this.register_events();\n        },\n\n        register_events: function(){\n\n\n            $(\"#next-button\").on(\"click\",function(){\n                app.next();\n            });\n\n            //finish with this one\n            $('body').on('click',\"#close-results\",function(){\n                //\"try again\" with this one\n               // $(\"#results\").hide();\n               // $(\"#start-button, #vocab-list\").show();\n\n                //\"finish\" with this one\n                var total_time=a4e.calc_total_time(app.results);\n                window.location.replace(app.nexturl.replace(/&amp;/g,'&') + \"&localscattertime=\" + total_time);\n\n            });\n\n            $(\"body\").on('click','.a4e-distractor',function(e){\n                app.check($(this).data('correct'),this);\n            });\n\n            $('body').on('click','#start-button',function(){\n                app.start();\n            });\n\n            $('body').on('click','#quit-button',function(){\n                app.quit();\n            });\n        },\n\n        process:function(json){\n\n            app.terms=json.terms;\n            app.has_images=json.has_images;\n            a4e.list_vocab(\"#vocab-list-inner\",app.terms);\n\n        },\n        start:function(){\n            app.results=[];\n            a4e.shuffle(app.terms);\n            app.pointer=0;\n            $(\"#vocab-list, #start-button\").hide();\n            $(\"#gameboard, #quit-button\").show();\n            $(\"#time-counter\").text(\"00:00\");\n            $(\"#progress-correct\").css('width','0%');\n            $(\"#progress-incorrect\").css('width','0%');\n            app.timer={\n                interval:setInterval(function(){ app.timer.update(); }, 1000),\n                count:0,\n                update:function(){\n                    app.timer.count++;\n                    $(\"#time-counter\").text(a4e.pretty_print_secs(app.timer.count));\n                }\n            }\n            app.next();\n        },\n        quit:function(){\n            clearInterval(app.timer.interval);\n            $(\"#gameboard, #quit-button\").hide();\n            $(\"#vocab-list, #start-button\").show();\n        },\n\n        end:function(){\n            clearInterval(app.timer.interval);\n            $(\"#gameboard, #quit-button, #start-button\").hide();\n            $(\"#results\").show();\n\n            //template data\n            var tdata=[];\n            tdata['results']=app.results;\n            tdata['total']=app.terms.length;\n            tdata['totalcorrect']=a4e.calc_total_points(app.results);\n            var total_time=a4e.calc_total_time(app.results);\n            if(total_time==0){\n                tdata['prettytime']='00:00';\n            }else{\n                tdata['prettytime']=a4e.pretty_print_secs(total_time);\n            }\n            templates.render('mod_wordcards/feedback',tdata).then(\n                function(html,js){\n                    $(\"#results-inner\").html(html);\n                }\n            );\n\n            var data={\n                results:app.results,\n                activity:\"match_select\"\n            };\n\n            console.log(data);\n\n        },\n        next:function(){\n\n            $(\"#next-button\").hide();\n\n            $(\"#question-counter\").text((app.pointer+1)+\"/\"+app.terms.length);\n\n            var progress={\n                correct:app.results.filter(function(e){return e.points>0}).length/app.terms.length*100,\n                incorrect:app.results.filter(function(e){return e.points==0}).length/app.terms.length*100\n            }\n\n            $(\"#progress-correct\").css('width',progress.correct+'%');\n            $(\"#progress-incorrect\").css('width',progress.incorrect+'%');\n            $(\"#question\").html(\"\");\n\n            if(app.terms[app.pointer]['definition']!==\"\" && app.terms[app.pointer]['term']!=\"\"){\n                if(app.terms[app.pointer].image!==null && app.terms[app.pointer].image!=\"\"){\n                    $(\"#question\").html(\"<img style='height:200px;width:auto;' class='center-block img-responsive img-thumbnail' src='\"+app.terms[app.pointer].image+\"'><br/>\");\n                }\n                else if(app.has_images && (app.terms[app.pointer].image==null || app.terms[app.pointer].image==\"\")){\n                    $(\"#question\").html(\"<img style='height:200px;width:auto;' class='center-block img-responsive img-thumbnail' src='/images/no-image.png'><br/>\");\n                }\n                $(\"#question\").append(\"<strong>\"+app.terms[app.pointer]['definition']+\"</strong>\");\n            }\n\n            else if(app.terms[app.pointer].image!==null && app.terms[app.pointer].image!=\"\"){\n                $(\"#question\").html(\"<img class='center-block img-responsive img-thumbnail' src='\"+app.terms[app.pointer].image+\"'>\");\n            }\n\n            else{\n                a4e.alert(\"Could not generate a test with these settings!\",\"error\");\n                app.end();\n            }\n\n            $(\"#input\").html(app.get_distractors());\n\n        },\n\n        check:function(correct,clicked){\n            var points=0;\n            if(correct==true){\n                //createjs.Sound.play('correct');\n                points=1;\n            }\n            else{\n                //createjs.Sound.play('incorrect');\n            }\n            $(\".a4e-distractor\").css('pointer-events','none');\n            var result={\n                question:app.terms[app.pointer]['definition'],\n                selected:$(clicked).text(),\n                correct:app.terms[app.pointer]['term'],\n                points: points,\n                time: app.timer.count\n            };\n            app.timer.count=0;\n            app.results.push(result);\n\n            var background=correct==true?'a4e-correct':'a4e-incorrect';\n            $(clicked).addClass(background).append(\"<i style='color:\"+(correct?'green':'red')+\";margin-left:5px;' class='fa fa-\"+(correct?'check':'times')+\"'></i>\").parent().addClass('a4e-click-disabled');\n\n            if(!correct){\n                $(\".a4e-distractor[data-correct='true']\").addClass('a4e-correct').append(\"<i style='color:green;margin-left:5px;' class='fa fa-check'></i>\");\n            }\n\n            //post results to server\n            if(correct){\n                this.reportSuccess(app.terms[app.pointer]['id']);\n            }else{\n                this.reportFailure(app.terms[app.pointer]['id'],$(clicked).data('id'));\n            }\n\n            app.pointer++;\n            if(!correct){\n                setTimeout(function(){\n                    if(app.pointer<app.terms.length) {\n                        $(\"#next-button\").trigger('click');\n                    }else{\n                        app.end();\n                    }\n                },1500)\n            }\n            else{\n                setTimeout(function(){\n                    if(app.pointer<app.terms.length) {\n                        $(\"#next-button\").trigger('click');\n                    }else{\n                        app.end();\n                    }\n                },1000)\n            }\n        },\n\n        get_distractors:function(){\n            var distractors=app.terms.slice(0);\n            var answer=app.terms[app.pointer]['term'];\n            distractors.splice(app.pointer,1);\n            a4e.shuffle(distractors);\n            distractors=distractors.slice(0,4);\n            distractors.push(app.terms[app.pointer]);\n            a4e.shuffle(distractors);\n            var options=[];\n            $.each(distractors,function(i,o){\n                var is_correct=o['term']==answer;\n                var term_id = o['id'];\n                options.push('<li data-id=\"' + term_id +'\" data-correct=\"'+is_correct.toString()+'\" class=\"list-group-item a4e-distractor a4e-noselect\">'+o['term']+'</li>');\n            });\n            var code='<ul class=\"list-group a4e-distractors\">'+options.join('')+'</ul>';\n            return code;\n        },\n\n        reportFailure: function(term1id, term2id) {\n            if (this.dryRun) {\n                return;\n            }\n\n            Ajax.call([{\n                methodname: 'mod_wordcards_report_failed_association',\n                args: {\n                    term1id: term1id,\n                    term2id: term2id\n                }\n            }]);\n        },\n\n        reportSuccess: function(termid) {\n            if (this.dryRun) {\n                return;\n            }\n\n            Ajax.call([{\n                methodname: 'mod_wordcards_report_successful_association',\n                args: {\n                    termid: termid\n                }\n            }]);\n        }\n    };\n\n    return app;\n\n});\n"],"file":"matchselect.min.js"}