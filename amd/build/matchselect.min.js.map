{"version":3,"sources":["../src/matchselect.js"],"names":["define","$","Ajax","log","a4e","templates","app","dryRun","init","props","theid","widgetid","nexturl","configcontrol","get","matchingdata","JSON","parse","value","remove","debug","process","register_events","on","next","total_time","calc_total_time","results","url","replace","window","location","reload","check","data","start","quit","json","terms","has_images","list_vocab","shuffle","pointer","hide","show","text","timer","interval","setInterval","update","count","pretty_print_secs","clearInterval","end","tdata","length","calc_total_points","render","then","html","activity","console","progress_dots","image","append","alert","get_distractors","correct","clicked","points","css","result","question","selected","time","push","background","addClass","parent","reportSuccess","reportFailure","setTimeout","trigger","distractors","slice","answer","splice","options","each","i","o","is_correct","term_id","toString","code","join","term1id","term2id","call","methodname","args","termid"],"mappings":"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","sourcesContent":["/**\n * Matching module.\n *\n * @package mod_wordcards\n * @author  Justin Hunt - poodll.com\n * * (based on Paul Raine's APPs 4 EFL)\n */\n\ndefine([\n  'jquery',\n  'core/ajax',\n  'core/log',\n  'mod_wordcards/a4e',\n  'core/templates'\n], function($, Ajax, log, a4e, templates) {\n\n  var app = {\n    dryRun: false,\n    init: function(props) {\n\n      //pick up opts from html\n      var theid = '#' + props.widgetid;\n      this.dryRun = props.dryRun;\n      this.nexturl = props.nexturl;\n      var configcontrol = $(theid).get(0);\n      if (configcontrol) {\n        var matchingdata = JSON.parse(configcontrol.value);\n        $(theid).remove();\n      } else {\n        //if there is no config we might as well give up\n        log.debug('No config found on page. Giving up.');\n        return;\n      }\n\n      app.process(matchingdata);\n\n      a4e.register_events();\n\n      this.register_events();\n    },\n\n    register_events: function() {\n\n      $(\"#next-button\").on(\"click\", function() {\n        app.next();\n      });\n\n      $('body').on('click', \"#close-results\", function() {\n\n        var total_time = a4e.calc_total_time(app.results);\n        var url = app.nexturl.replace(/&amp;/g, '&') + \"&localscattertime=\" + total_time\n        window.location.replace(url);\n\n      });\n\n      $('body').on('click', \"#try-again\", function() {\n        location.reload();\n      });\n\n      $(\"body\").on('click', '.a4e-distractor', function(e) {\n        app.check($(this).data('correct'), this);\n      });\n\n      $('body').on('click', '#start-button', function() {\n        app.start();\n      });\n\n      $('body').on('click', '#quit-button', function() {\n        app.quit();\n      });\n    },\n\n    process: function(json) {\n\n      app.terms = json.terms;\n      app.has_images = json.has_images;\n      a4e.list_vocab(\"#vocab-list-inner\", app.terms);\n\n    },\n    start: function() {\n      app.results = [];\n      a4e.shuffle(app.terms);\n      app.pointer = 0;\n      $(\"#vocab-list, #start-button\").hide();\n      $(\"#gameboard, #quit-button\").show();\n      $(\"#time-counter\").text(\"00:00\");\n      app.timer = {\n        interval: setInterval(function() {\n          app.timer.update();\n        }, 1000),\n        count: 0,\n        update: function() {\n          app.timer.count++;\n          $(\"#time-counter\").text(a4e.pretty_print_secs(app.timer.count));\n        }\n      }\n      app.next();\n    },\n    quit: function() {\n      clearInterval(app.timer.interval);\n      $(\"#gameboard, #quit-button\").hide();\n      $(\"#vocab-list, #start-button\").show();\n    },\n\n    end: function() {\n      clearInterval(app.timer.interval);\n      $(\"#gameboard, #quit-button, #start-button\").hide();\n      $(\"#results\").show();\n\n      //template data\n      var tdata = [];\n      tdata['results'] = app.results;\n      tdata['total'] = app.terms.length;\n      tdata['totalcorrect'] = a4e.calc_total_points(app.results);\n      var total_time = a4e.calc_total_time(app.results);\n      if (total_time == 0) {\n        tdata['prettytime'] = '00:00';\n      } else {\n        tdata['prettytime'] = a4e.pretty_print_secs(total_time);\n      }\n      templates.render('mod_wordcards/feedback', tdata).then(\n        function(html, js) {\n          $(\"#results-inner\").html(html);\n        }\n      );\n\n      var data = {\n        results: app.results,\n        activity: \"match_select\"\n      };\n\n      console.log(data);\n\n    },\n    next: function() {\n\n      $(\"#next-button\").hide();\n\n      a4e.progress_dots(app.results, app.terms);\n\n      if (app.terms[app.pointer]['definition'] !== \"\" && app.terms[app.pointer]['term'] != \"\") {\n        if (app.terms[app.pointer].image !== null && app.terms[app.pointer].image != \"\") {\n          $(\"#question\").html(\"<img style='height:200px;width:auto;' class='center-block img-responsive img-thumbnail' src='\" + app.terms[app.pointer].image + \"'><br/>\");\n        } else if (app.has_images && (app.terms[app.pointer].image == null || app.terms[app.pointer].image == \"\")) {\n          $(\"#question\").html(\"<img style='height:200px;width:auto;' class='center-block img-responsive img-thumbnail' src='/images/no-image.png'><br/>\");\n        }\n        $(\"#question\").append(\"<strong>\" + app.terms[app.pointer]['definition'] + \"</strong>\");\n      } else if (app.terms[app.pointer].image !== null && app.terms[app.pointer].image != \"\") {\n        $(\"#question\").html(\"<img class='center-block img-responsive img-thumbnail' src='\" + app.terms[app.pointer].image + \"'>\");\n      } else {\n        a4e.alert(\"Could not generate a test with these settings!\", \"error\");\n        app.end();\n      }\n\n      $(\"#input\").html(app.get_distractors());\n\n    },\n\n    check: function(correct, clicked) {\n      var points = 0;\n      if (correct == true) {\n        //createjs.Sound.play('correct');\n        points = 1;\n      } else {\n        //createjs.Sound.play('incorrect');\n      }\n      $(\".a4e-distractor\").css('pointer-events', 'none');\n      var result = {\n        question: app.terms[app.pointer]['definition'],\n        selected: $(clicked).text(),\n        correct: app.terms[app.pointer]['term'],\n        points: points,\n        time: app.timer.count\n      };\n      app.timer.count = 0;\n      app.results.push(result);\n\n      var background = correct == true ? 'a4e-correct' : 'a4e-incorrect';\n      $(clicked).addClass(background).append(\"<i style='color:\" + (correct ? 'green' : 'red') + \";margin-left:5px;' class='fa fa-\" + (correct ? 'check' : 'times') + \"'></i>\").parent().addClass('a4e-click-disabled');\n\n      if (!correct) {\n        $(\".a4e-distractor[data-correct='true']\").addClass('a4e-correct').append(\"<i style='color:green;margin-left:5px;' class='fa fa-check'></i>\");\n      }\n\n      //post results to server\n      if (correct) {\n        this.reportSuccess(app.terms[app.pointer]['id']);\n      } else {\n        this.reportFailure(app.terms[app.pointer]['id'], $(clicked).data('id'));\n      }\n\n      app.pointer++;\n      if (!correct) {\n        setTimeout(function() {\n          if (app.pointer < app.terms.length) {\n            $(\"#next-button\").trigger('click');\n          } else {\n            app.end();\n          }\n        }, 1500)\n      } else {\n        setTimeout(function() {\n          if (app.pointer < app.terms.length) {\n            $(\"#next-button\").trigger('click');\n          } else {\n            app.end();\n          }\n        }, 1000)\n      }\n    },\n\n    get_distractors: function() {\n      var distractors = app.terms.slice(0);\n      var answer = app.terms[app.pointer]['term'];\n      distractors.splice(app.pointer, 1);\n      a4e.shuffle(distractors);\n      distractors = distractors.slice(0, 4);\n      distractors.push(app.terms[app.pointer]);\n      a4e.shuffle(distractors);\n      var options = [];\n      $.each(distractors, function(i, o) {\n        var is_correct = o['term'] == answer;\n        var term_id = o['id'];\n        options.push('<li data-id=\"' + term_id + '\" data-correct=\"' + is_correct.toString() + '\" class=\"list-group-item a4e-distractor a4e-noselect\">' + o['term'] + '</li>');\n      });\n      var code = '<ul class=\"list-group a4e-distractors\">' + options.join('') + '</ul>';\n      return code;\n    },\n\n    reportFailure: function(term1id, term2id) {\n      if (this.dryRun) {\n        return;\n      }\n\n      Ajax.call([{\n        methodname: 'mod_wordcards_report_failed_association',\n        args: {\n          term1id: term1id,\n          term2id: term2id\n        }\n      }]);\n    },\n\n    reportSuccess: function(termid) {\n      if (this.dryRun) {\n        return;\n      }\n\n      Ajax.call([{\n        methodname: 'mod_wordcards_report_successful_association',\n        args: {\n          termid: termid\n        }\n      }]);\n    }\n  };\n\n  return app;\n\n});"],"file":"matchselect.min.js"}