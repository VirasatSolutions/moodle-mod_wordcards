define(["jquery","core/log","core/ajax","mod_wordcards/flip","mod_wordcards/textfit","core/templates","mod_wordcards/pollyhelper"],function(a,b,c,d,e,f,g){var h={face:!0,register_events:function(){console.log("register_events within a4e.js")},init_audio:function(b,c,d){g.init(b,c,d),g.onnewpollyurl=function(b){var c=a("#poodll_vocabplayer");c.attr("src",b),c[0].play()},a(document.body).on("click",".a4e-flashcards-container .play-tts, .definitions-container .definition-play-tts ",function(){var b=a("#poodll_vocabplayer"),c=a(this).attr("data-modelaudio");!c||0!==c.indexOf("http:")&&0!==c.indexOf("https:")?g.fetch_polly_url(a(this).attr("data-tts"),"text",a(this).attr("data-ttsvoice")):(b.attr("src",c),b[0].play())})},progress_dots:function(b,c){var d,e="";c.forEach(function(a,c){d="darkgray",void 0!==b[c]&&(d=b[c].points?"green":"red"),e+='<i style="color:'+d+';" class="fa fa-circle"></i>'}),a("#progress-dots").html(e)},shuffle:function(a){var b,c,d;for(d=a.length;d;d-=1)b=Math.floor(Math.random()*d),c=a[d-1],a[d-1]=a[b],a[b]=c},pretty_print_secs:function(a){var b=Math.floor(a/60),c=a-60*b;return h.str_pad_left(b,"0",2)+":"+h.str_pad_left(c,"0",2)},list_vocab:function(b,c){var d=[];d.terms=c,f.render("mod_wordcards/vocablist",d).then(function(c,d){a(b).html(c);var f=a(".a4e-flashcards-container .a4e-card"),g=a(".front,.back");setTimeout(function(){f.flip({axis:"x"}),e(g,{multiLine:!0,maxFontSize:50,alignHoriz:!0,alignVert:!0})},100),a(".a4e-flashcards-container .mod_wordcards_matching_frontbtn").on("click",function(){a(".a4e-flashcards-container .a4e-card").flip(h.face),h.face=!h.face})})},calc_total_points:function(b){var c=0;return a.each(b,function(a,b){void 0!=b.points&&(c+=b.points)}),c},basic_feedback:function(b){var c=0,d=0;a.each(b,function(a,b){null!=b.time&&(d+=b.time),void 0!=b.points&&(c+=b.points)});var e="<div class='a4e-basic_feedback'><h2>";return e+="<i class='fa fa-trophy'></i> "+c+" points",0!=d&&(e+="<hr/><i class='fa fa-clock-o'></i> "+h.pretty_print_secs(d)),e+="</h2></div>"},detailed_feedback:function(b){var c,d="<div style='text-align:center;'>";return a.each(b,function(b,e){c="",c=e.points>0?"a4e-correct":"a4e-incorrect",d+="<div class='a4e-detailed_feedback_div "+c+"'>",d+="<h3 style='margin-bottom:10px;margin-top:5px;'>"+(b+1)+"</h3>",a.each(e,function(a,b){d+="time"==a?"<p><strong>"+h.ucfirst(a)+"</strong>:<br/>"+h.pretty_print_secs(b)+"</p>":"<p><strong>"+h.ucfirst(a)+"</strong>:<br/>"+(""==b?"N/A":b)+"</p>"}),d+="</div>"}),d+="</div>"},str_pad_left:function(a,b,c){return(new Array(c+1).join(b)+a).slice(-c)},ucfirst:function(a){a+="";var b=a.charAt(0).toUpperCase();return b+a.substr(1)}};return h});