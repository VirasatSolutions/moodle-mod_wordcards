define("mod_wordcards/a4e",["jquery","core/log","core/ajax","mod_wordcards/flip","mod_wordcards/textfit","core/templates","mod_wordcards/pollyhelper"],function(t,a,r,e,n,o,i){var c={face:!0,register_events:function(){console.log("register_events within a4e.js")},init_audio:function(a,r,e){i.init(a,r,e),i.onnewpollyurl=function(a){var r=t("#poodll_vocabplayer");r.attr("src",a),r[0].play()},t(document.body).on("click",".a4e-flashcards-container .play-tts, span.model-sentence-play-tts,.definitions-container .definition-play-tts ",function(){var a=t("#poodll_vocabplayer"),r=t(this).attr("data-modelaudio");!r||0!==r.indexOf("http:")&&0!==r.indexOf("https:")?i.fetch_polly_url(t(this).attr("data-tts"),"text",t(this).attr("data-ttsvoice")):(a.attr("src",r),a[0].play())})},progress_dots:function(a,r){var e,n="";r.forEach(function(t,r){e="darkgray",void 0!==a[r]&&(e=a[r].points?"green":"red"),n+='<i style="color:'+e+';" class="fa fa-circle"></i>'}),t("#wordcards-progress-dots").html(n)},shuffle:function(t){var a,r,e;for(e=t.length;e;e-=1)a=Math.floor(Math.random()*e),r=t[e-1],t[e-1]=t[a],t[a]=r},pretty_print_secs:function(t){var a=Math.floor(t/60);return c.str_pad_left(a,"0",2)+":"+c.str_pad_left(t-60*a,"0",2)},list_vocab:function(a,r){var e=[];e.terms=r,o.render("mod_wordcards/vocablist",e).then(function(r){t(a).html(r);var e=t(".a4e-flashcards-container .a4e-card"),o=t(".front,.back");setTimeout(function(){e.flip({axis:"x"}),n(o,{multiLine:!0,maxFontSize:50,alignHoriz:!0,alignVert:!0})},100),t(".a4e-flashcards-container .mod_wordcards_matching_frontbtn").on("click",function(){t(".a4e-flashcards-container .a4e-card").flip(c.face),c.face=!c.face})})},calc_total_points:function(a){var r=0;return t.each(a,function(t,a){null!=a.points&&(r+=a.points)}),r},basic_feedback:function(a){var r=0,e=0;t.each(a,function(t,a){null!=a.time&&(e+=a.time),null!=a.points&&(r+=a.points)});var n="<div class='a4e-basic_feedback'><h2>";return n+="<i class='fa fa-trophy'></i> "+r+" points",0!=e&&(n+="<hr/><i class='fa fa-clock-o'></i> "+c.pretty_print_secs(e)),n+="</h2></div>"},detailed_feedback:function(a){var r,e="<div style='text-align:center;'>";return t.each(a,function(a,n){r="",r=0<n.points?"a4e-correct":"a4e-incorrect",e+="<div class='a4e-detailed_feedback_div "+r+"'>",e+="<h3 style='margin-bottom:10px;margin-top:5px;'>"+(a+1)+"</h3>",t.each(n,function(t,a){e+="time"==t?"<p><strong>"+c.ucfirst(t)+"</strong>:<br/>"+c.pretty_print_secs(a)+"</p>":"<p><strong>"+c.ucfirst(t)+"</strong>:<br/>"+(""==a?"N/A":a)+"</p>"}),e+="</div>"}),e+="</div>"},str_pad_left:function(t,a,r){return(Array(r+1).join(a)+t).slice(-r)},ucfirst:function(t){return(t+="").charAt(0).toUpperCase()+t.substr(1)}};return c});